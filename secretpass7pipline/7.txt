Доводим до ума пайп по сборке докера . Сегодня будем пушить наши образы (обращай внимания не на код а на саму логику)
Добавляем докер пуш , так как у меня есть докеробразы которые валяются локально на дж и мы их использовать не можем . Сегодня будем смотреть на то как дж использует плагины (в частности плагины которые позволяют сохронять реквизиты доступа и их юзает) , но перед тем как туда дойти надо чекнуть принцыпы наименования образов 
Обьяснения докертегимг 

Сейчас когда я билдю свой образ они называются <none>:<none> 
Образ докера имеет имя и имеет тег после : (по умолч latest), но можно ставть любые теги , допустим ставить версирования . Но и после формирования самого образа можно хранить их не локально а публично (в паб.регистери) , у нас могу быть свои хранилищя , внешние(типа докерхаба) - НО можно наш образ назвать так чтоб он включал путь к хранилищю (нашему)и туда этот образ послать myregestry.ru/toolbox:1.14.1 - я буду работать с докерхабом . Кажды раз когда я буду пушить образ со своим тегом в паб регистери он будет обновляться (со старого тег будет сниматься и ставиться на навый если будем юзать тег с тем-же именем)


-----
Переходим в машину с дж , и чекаем наши докеробразы - docker ps 
и видим альпину (через который я соберал тулбокс) , и мои образы которые я создавал , у них нет репы и нет тега , есть только id (это не удобно юзать) поетому щас начинаем тегать наши образы 

-----
у меня есть пайп которые я автоматизировал - docker_build.jenkins (****) поетому можно изменть и глянуть как дж подхватит .
До этого я делал простой докер билд , но щас я добавлю команду которая добаляет тег - docker build -t toolbox:latest . 
все будет как надо ))))	(если на дж слои не менаю то соберётся быстро
Теперь я этот докер образ могу начать с ним работать по имени (запускать контейнеры)

Тепреь я хочу етот образ запушить - для этого мне нужен докер хаб (надо зарегаться и запомнить креды которые я щас добавлю в дж и можно будет сразу в докерхаб отправлять тулбоксы 
чтоб отправить образ в докерхаб , надо в пайп добавить имя репы - docker build -t lizardkinggg/toolbox:latest  (надо указывать имя паб регисты , но если его нет то надо использовать докер хаб когда я начну туда пушить  )
дальше в дж надо настоить учётки (чтоб они работали надо чтоб был кред плагин 

Credentials - Jenkins (наше хранилище) , - global credentials (глобал креды) - add credentials (username and password) - докер хаб позволяет авториз по имени и паролю (id назови как-то понятно - dockerhub_morrison(именно по этому id будет обращение к пайпу 
*пароль храниться в бд дж , и можно будет в пайпах без необход вручную туда его вбивать - поетому надо юзать плагин с кредами  

Теперь перхожу в пайп и добавляю шаг который будет делать докер логин (это просто показуха как работают плагины с реквезитами доступа - withcredentials... (затем креды какого типа (ссш ,докер сертификат ... но мы чекаем не с тем как именно с докером рабоать , а стем как юзать логин и пароль ) , затем наш id  , имя пользов попадает в перем юзернейм , пароль в пассворд , и затем выполняю докер логин (не указ на какой серв логинимся (по умол докерхаб )) - нигде не видно мой пароль , он всегда спрятан 

Теперь добавим ДОКЕРПУШ - добавляем новый стейдж в котором всё ясно '

*создали образ в этапе create с одним тегом , и стакимже тегом их пушим 


-----
Теперь на стейдже логина , можно увидеть что у нас юзер скрыт и пасс тоже - но пишет что пасс будет хранитсья не зашифрованый (и ниже в ссылке обьясняться как от этого избавиться) - при логине дж создает файл с токеном , который можно тоже юзать для авторизации(но по хорош надо настаивать через допол плагины дж (так как может быть несколько регист , чтот туда пушим чтот сюда и этот файл будет всегда перезатираться . Банально через докер логин нельзя с докером работаь 
Тперь я могу сделать где угодно докер-пулл и именем репы и это будет у меня 

 
проверяем докер имг , так как мы в стором образе ничего не меняли просто меняетсья тег 





ВЫВОД 
СДЕЛАЛ ДОКЕР ЛОГИН И ДОКЕР ПУШ (ПОКАЗ КАК ЮЗАТЬ ЛОГИН И ПАСС ТАК ЧТОБ ИХ НИКТО НЕ УВИДЕЛ И ЧТОБ НЕ ХРАНИТЬ ИХ ВСВОЁМ КОДЕ -ЭТО МОГУТ ВСЕ СИ.СД , ПОНЯЛИ ЧТО ТАКОЕ ДОКЕР ТЕГИ КАК ИХ ЮЗАТЬ , И ЗАПУШИЛИ НАШ ОБРАЗ 
